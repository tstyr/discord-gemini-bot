# ğŸµ éŸ³æ¥½å†ç”Ÿã‚¨ãƒ©ãƒ¼ä¿®æ­£ã‚¬ã‚¤ãƒ‰

## ğŸ“‹ å•é¡Œã®æ¦‚è¦

**ç—‡çŠ¶:**
- å­˜åœ¨ã™ã‚‹æ›²ãŒã€Œè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹
- URLã‚’ç›´æ¥å…¥åŠ›ã—ã¦ã‚‚å†ç”Ÿå¤±æ•—ã™ã‚‹
- ã™ã¹ã¦ã®éŸ³æ¥½æ¤œç´¢ãƒ»å†ç”ŸãŒå‹•ä½œã—ãªã„

**åŸå› :**
YouTubeã®ç½²åæš—å·åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒæ›´æ–°ã•ã‚Œã€å¤ã„LavaplayerãŒå¯¾å¿œã§ããªããªã£ãŸ

## âœ… ä¿®æ­£å†…å®¹

### 1. Lavalinkè¨­å®šã®æœ€é©åŒ–

`lavalink/application.yml` ã‚’æ›´æ–°ã—ã¾ã—ãŸ:

```yaml
plugins:
  youtube:
    clients:
      - ANDROID_TESTSUITE  # â† æœ€ã‚‚å®‰å®šã—ãŸã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
      - ANDROID_LITE
      - WEB
      - MUSIC
```

**å¤‰æ›´ç‚¹:**
- `ANDROID_TESTSUITE` ã‚’è¿½åŠ ï¼ˆYouTubeç½²åæš—å·åŒ–ã‚’å›é¿ï¼‰
- `MEDIA_CONNECT` ã‚’å‰Šé™¤ï¼ˆä¸å®‰å®šï¼‰

### 2. æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«

ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸ:

1. **restart_lavalink.bat** - Lavalinkå†èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
2. **check_music_setup.py** - è¨­å®šãƒã‚§ãƒƒã‚¯ãƒ„ãƒ¼ãƒ«
3. **MUSIC_PLAYBACK_FIX.md** - æŠ€è¡“çš„ãªè©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## ğŸš€ ä¿®æ­£æ‰‹é †ï¼ˆ3ã‚¹ãƒ†ãƒƒãƒ—ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—1: è¨­å®šãƒã‚§ãƒƒã‚¯

```cmd
python check_music_setup.py
```

ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒä»¥ä¸‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™:
- âœ… ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
- âœ… Lavalinkãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨
- âœ… Lavalinkè¨­å®šã®æ­£ç¢ºæ€§
- âœ… Botä¾å­˜é–¢ä¿‚
- âœ… Lavalinkæ¥ç¶š

### ã‚¹ãƒ†ãƒƒãƒ—2: Lavalinkå†èµ·å‹•

```cmd
restart_lavalink.bat
```

ã¾ãŸã¯æ‰‹å‹•ã§:

```cmd
cd lavalink
java -jar Lavalink.jar
```

**ç¢ºèª:** ãƒ­ã‚°ã«ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°OK
```
INFO: Lavalink is ready to accept connections.
```

### ã‚¹ãƒ†ãƒƒãƒ—3: Botèµ·å‹•

```cmd
python bot/main.py
```

ã¾ãŸã¯:

```cmd
python start_bot.py
```

## ğŸ§ª å‹•ä½œãƒ†ã‚¹ãƒˆ

### ãƒ†ã‚¹ãƒˆ1: æ—¥æœ¬èªæ¤œç´¢
```
ã‚ªãƒ¼ã‚¤ã‚·ãƒã‚µãƒ¨ã‚·æµã—ã¦
```

**æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ:**
1. 15ä»¶ã®æ¤œç´¢çµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹
2. ç•ªå·ãƒœã‚¿ãƒ³ã§æ›²ã‚’é¸æŠã§ãã‚‹
3. é¸æŠã—ãŸæ›²ãŒå†ç”Ÿã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆ2: URLå…¥åŠ›
```
https://www.youtube.com/watch?v=xxxxx æµã—ã¦
```

**æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ:**
1. URLãŒæ¤œå‡ºã•ã‚Œã‚‹
2. å³åº§ã«å†ç”ŸãŒé–‹å§‹ã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆ3: ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰
```
/play query:YOASOBI ã‚¢ã‚¤ãƒ‰ãƒ«
```

**æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ:**
1. æ¤œç´¢çµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹
2. æ›²ã‚’é¸æŠã—ã¦å†ç”Ÿã§ãã‚‹

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼: "æ›²ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"

**åŸå› 1: LavalinkãŒèµ·å‹•ã—ã¦ã„ãªã„**
```cmd
# Lavalinkæ¥ç¶šç¢ºèª
python check_music_setup.py
```

**åŸå› 2: Lavalinkè¨­å®šãŒå¤ã„**
```cmd
# application.ymlã‚’ç¢ºèª
cd lavalink
notepad application.yml
```

`ANDROID_TESTSUITE` ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

**åŸå› 3: LavalinkãŒå¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³**
```
Version: 4.0.8 ä»¥ä¸ŠãŒå¿…è¦
```

### ã‚¨ãƒ©ãƒ¼: "Must find action functions"

ã“ã‚Œã¯ä¿®æ­£å‰ã®ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚ä»¥ä¸‹ã‚’ç¢ºèª:

1. **Lavalinkå†èµ·å‹•æ¸ˆã¿ã‹?**
   ```cmd
   restart_lavalink.bat
   ```

2. **application.ymlãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã‹?**
   ```yaml
   clients:
     - ANDROID_TESTSUITE  # â† ã“ã‚ŒãŒã‚ã‚‹ã‹ç¢ºèª
   ```

3. **å¤ã„Lavalinkãƒ—ãƒ­ã‚»ã‚¹ãŒæ®‹ã£ã¦ã„ãªã„ã‹?**
   ```cmd
   taskkill /F /IM java.exe
   restart_lavalink.bat
   ```

### ã‚¨ãƒ©ãƒ¼: "Connection refused"

**åŸå› : LavalinkãŒèµ·å‹•ã—ã¦ã„ãªã„**

```cmd
cd lavalink
java -jar Lavalink.jar
```

**ç¢ºèª:**
- ãƒãƒ¼ãƒˆ2333ãŒä½¿ç”¨ä¸­ã§ãªã„ã‹
- ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ãŒãƒ–ãƒ­ãƒƒã‚¯ã—ã¦ã„ãªã„ã‹

### ã‚¨ãƒ©ãƒ¼: "401 Unauthorized"

**åŸå› : ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã‚‹**

`bot/.env` ã‚’ç¢ºèª:
```env
LAVALINK_PASSWORD=youshallnotpass
```

`lavalink/application.yml` ã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã‹ç¢ºèª:
```yaml
lavalink:
  server:
    password: "youshallnotpass"
```

## ğŸ“Š æ­£å¸¸å‹•ä½œã®ç¢ºèª

### Lavalinkãƒ­ã‚°ï¼ˆæ­£å¸¸ï¼‰
```
INFO: Lavalink is ready to accept connections.
INFO: Connection successfully established from Wavelink/3.4.1
INFO: Got request to load for identifier "ytsearch15:ã‚ªãƒ¼ã‚¤ã‚·ãƒã‚µãƒ¨ã‚·"
INFO: Loaded playlist Search results for: ã‚ªãƒ¼ã‚¤ã‚·ãƒã‚µãƒ¨ã‚·
```

### Lavalinkãƒ­ã‚°ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰
```
ERROR: Must find action functions from script  â† ä¿®æ­£å‰ã®ã‚¨ãƒ©ãƒ¼
ERROR: Connection refused                      â† Lavalinkæœªèµ·å‹•
ERROR: 401 Unauthorized                        â† ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ä¸ä¸€è‡´
```

### Botãƒ­ã‚°ï¼ˆæ­£å¸¸ï¼‰
```
INFO: âœ… Connected to Lavalink server successfully
INFO: Searching YouTube with query: ytsearch15:ã‚ªãƒ¼ã‚¤ã‚·ãƒã‚µãƒ¨ã‚·
INFO: Found 15 track(s)
INFO: Started playing: ãƒ‹ãƒ³ã‚²ãƒ³ - Ningen
```

### Botãƒ­ã‚°ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰
```
ERROR: âŒ Failed to connect to Lavalink        â† Lavalinkæœªèµ·å‹•
ERROR: âŒ Wavelink ytsearch failed             â† æ¤œç´¢å¤±æ•—
WARNING: Music player not loaded               â† Lavalinkæ¥ç¶šå¤±æ•—
```

## ğŸ¯ ã‚ˆãã‚ã‚‹è³ªå•

### Q1: Lavalinkã‚’æ¯å›èµ·å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ

**A:** ã¯ã„ã€Botã‚’ä½¿ç”¨ã™ã‚‹å‰ã«Lavalinkã‚’èµ·å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

**è‡ªå‹•èµ·å‹•ã®è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰:**
1. Windowsã‚¿ã‚¹ã‚¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã§è‡ªå‹•èµ·å‹•
2. Dockerã§å¸¸æ™‚èµ·å‹•
3. ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦ç™»éŒ²

### Q2: éŸ³æ¥½ãŒé€”ä¸­ã§æ­¢ã¾ã‚Šã¾ã™

**åŸå› :**
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šãŒä¸å®‰å®š
- Lavalinkã®ãƒ¡ãƒ¢ãƒªä¸è¶³
- YouTubeã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™

**è§£æ±ºç­–:**
```cmd
# Lavalinkã‚’å†èµ·å‹•
restart_lavalink.bat
```

### Q3: ç‰¹å®šã®æ›²ã ã‘å†ç”Ÿã§ãã¾ã›ã‚“

**åŸå› :**
- å¹´é½¢åˆ¶é™ä»˜ãå‹•ç”»
- åœ°åŸŸåˆ¶é™
- è‘—ä½œæ¨©ãƒ–ãƒ­ãƒƒã‚¯

**è§£æ±ºç­–:**
åˆ¥ã®æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’è©¦ã™ã€ã¾ãŸã¯åˆ¥ã®ã‚½ãƒ¼ã‚¹ï¼ˆSpotifyã€SoundCloudï¼‰ã‚’ä½¿ç”¨

### Q4: Spotifyã®æ›²ã‚’å†ç”Ÿã§ãã¾ã™ã‹ï¼Ÿ

**A:** ã¯ã„ã€å¯èƒ½ã§ã™ã€‚

```
/play query:spsearch:YOASOBI ã‚¢ã‚¤ãƒ‰ãƒ«
```

ã¾ãŸã¯:
```
https://open.spotify.com/track/xxxxx æµã—ã¦
```

### Q5: ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆã¯ä½¿ãˆã¾ã™ã‹ï¼Ÿ

**A:** ã¯ã„ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ä½¿ç”¨ã§ãã¾ã™:

```
/playlist create name:ãŠæ°—ã«å…¥ã‚Š
/playlist play
```

## ğŸ“ ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`bot/.env` ã«ä»¥ä¸‹ã‚’è¨­å®š:

```env
# Discord Bot
DISCORD_TOKEN=your_discord_bot_token
GEMINI_API_KEY=your_gemini_api_key

# Database
DATABASE_URL=your_supabase_database_url
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your_supabase_anon_key

# Lavalinkï¼ˆéŸ³æ¥½æ©Ÿèƒ½ï¼‰
LAVALINK_HOST=localhost
LAVALINK_PORT=2333
LAVALINK_PASSWORD=youshallnotpass
LAVALINK_SECURE=false

# Spotifyï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
SPOTIFY_CLIENT_ID=your_spotify_client_id
SPOTIFY_CLIENT_SECRET=your_spotify_client_secret
```

## ğŸ‰ ä¿®æ­£å®Œäº†ã®ç¢ºèª

ä»¥ä¸‹ãŒã™ã¹ã¦å‹•ä½œã™ã‚Œã°ä¿®æ­£å®Œäº†ã§ã™:

- âœ… `python check_music_setup.py` ãŒã™ã¹ã¦OK
- âœ… LavalinkãŒæ­£å¸¸èµ·å‹•ï¼ˆ"ready to accept connections"ï¼‰
- âœ… BotãŒæ­£å¸¸èµ·å‹•ï¼ˆ"Connected to Lavalink"ï¼‰
- âœ… éŸ³æ¥½æ¤œç´¢ã§çµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… æ›²ãŒæ­£å¸¸ã«å†ç”Ÿã•ã‚Œã‚‹
- âœ… URLã‹ã‚‰ã‚‚å†ç”Ÿã§ãã‚‹

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒè§£æ±ºã—ãªã„å ´åˆ:

1. **ãƒ­ã‚°ã‚’ç¢ºèª:**
   - `lavalink/logs/spring.log`
   - Botã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›

2. **è¨­å®šãƒã‚§ãƒƒã‚¯:**
   ```cmd
   python check_music_setup.py
   ```

3. **è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:**
   - `MUSIC_PLAYBACK_FIX.md` - æŠ€è¡“çš„ãªè©³ç´°
   - `HOW_TO_USE.md` - ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰

---

**æœ€çµ‚æ›´æ–°:** 2026-01-23
**ä¿®æ­£ãƒãƒ¼ã‚¸ãƒ§ãƒ³:** v2.0
**å¯¾å¿œLavalink:** 4.0.8+
**å¯¾å¿œYouTube Plugin:** 1.11.5+
